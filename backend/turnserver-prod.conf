# TURN server configuration for production deployment
# Optimized for Dokploy/Docker environment

# Listening ports
listening-port=3478
tls-listening-port=5349

# Relay ports range
min-port=10000
max-port=20000

# Server configuration
server-name=turn.fraudsense.com
realm=fraudsense

# Enable TURN functionality
lt-cred-mech

# User credentials (will be set via environment variables in production)
user=fraudsense:fraudsense123

# Logging configuration
log-file=stdout
simple-log
verbose

# Security settings
no-multicast-peers
no-cli
no-tlsv1
no-tlsv1_1
secure-stun

# Network configuration
listening-ip=0.0.0.0
relay-ip=0.0.0.0

# Process settings
pidfile=/var/tmp/turnserver.pid

# Performance settings
max-allocate-lifetime=3600
channel-lifetime=600
permission-lifetime=300

# External IP will be auto-detected or can be set via environment
# external-ip=YOUR_SERVER_PUBLIC_IP

# TLS settings (uncomment when you have certificates)
# cert=/etc/ssl/certs/turn_server_cert.pem
# pkey=/etc/ssl/private/turn_server_pkey.pem

# Database (optional - for persistent storage)
# userdb=/var/lib/turn/turndb

# Additional security
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255

# Allow loopback for local testing
allowed-peer-ip=127.0.0.1
allowed-peer-ip=::1